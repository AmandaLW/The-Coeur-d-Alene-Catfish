%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Arsclassica Article
% LaTeX Template
% Version 1.1 (1/8/17)
%
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
%
% Original author:
% Lorenzo Pantieri (http://www.lorenzopantieri.net) with extensive modifications by:
% Vel (vel@latextemplates.com)
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[
18pt, % Main document font size
a4paper, % Paper type, use 'letterpaper' for US Letter paper
oneside, % One page layout (no page indentation)
%twoside, % Two page layout (page indentation for binding and different headers)
headinclude,footinclude, % Extra spacing for the header and footer
%BCOR5mm, % Binding correction
]{scrartcl}

\input{structure.tex} % Include the structure.tex file which specified the document structure and layout

\hyphenation{Fortran hy-phen-ation} % Specify custom hyphenation points in words with dashes where you would like hyphenation to occur, or alternatively, don't put any dashes in a word to stop hyphenation altogether
\usepackage{stix} % Use the STIX fonts

%----------------------------------------------------------------------------------------
%	TITLE AND AUTHOR(S)
%----------------------------------------------------------------------------------------

\title{\normalfont\spacedallcaps{Op}} % The article title

%\subtitle{Subtitle} % Uncomment to display a subtitle

\date{} % An optional date to appear under the author(s)

%----------------------------------------------------------------------------------------

\begin{document}

%----------------------------------------------------------------------------------------
%	HEADERS
%----------------------------------------------------------------------------------------

\renewcommand{\sectionmark}[1]{\markright{\spacedlowsmallcaps{#1}}} % The header for all pages (oneside) or for even pages (twoside)
%\renewcommand{\subsectionmark}[1]{\markright{\thesubsection~#1}} % Uncomment when using the twoside option - this modifies the header on odd pages
\lehead{\mbox{\llap{\small\thepage\kern1em\color{halfgray} \vline}\color{halfgray}\hspace{0.5em}\rightmark\hfil}} % The header style

\pagestyle{scrheadings} % Enable the headers specified in this block

%----------------------------------------------------------------------------------------
%	TABLE OF CONTENTS & LISTS OF FIGURES AND TABLES
%----------------------------------------------------------------------------------------

%\maketitle % Print the title/author/date block

\setcounter{tocdepth}{2} % Set the depth of the table of contents to show sections and subsections only

\tableofcontents % Print the table of contents


%----------------------------------------------------------------------------------------
%	AUTHOR AFFILIATIONS
%----------------------------------------------------------------------------------------

%\let\thefootnote\relax\footnotetext{* \textit{Research Head, Idaho Catfish Project, Coeur d'Alene, Idaho}}

%----------------------------------------------------------------------------------------

\newpage % Start the article content on the second page, remove this if you have a longer abstract that goes onto the second page

%----------------------------------------------------------------------------------------
%	INTRODUCTION
%----------------------------------------------------------------------------------------

\section{Introduction}
\subsection*{Overview}

Northern Idaho is one of the regions in the western United States that has seen extensive mining operations. The South fork of the Coeur d’Alene river has carried heavy metal contaminated sediments from silver and lead mining to the Coeur d’Alene lakebed. By developing an underwater drone capable of descending to deep-water, we become able to read the water quality in lakes and reservoirs. This will allow better supervision of water bodies and management of toxicity.

\subsection*{Purpose \& Scope}

This project focuses on creating and/or beginning development of an autonomous submarine that will collect water quality data in deep-water lakes and reservoirs. This submarine, dubbed the “Idaho Catfish”, will be able to perform such underwater surveys by continuously sampling a variety of water quality variables such as oxygen, pH, temperature, etc. The end result will be that the Catfish will be fully autonomous, but tethered instructions will also be provided.

\subsection*{The Submarine}
The submarine itself has been provided by Gizmo Coeur d'Alene and is a small sized submarine and handling gear set. The Catfish has been to the bottom of Lake Pend Oreille and is confirmed to be airtight and functional at 1200 feet under the water. It is speculated that it is good to go under up to 1600 feet but this is untested.

\subsection*{Term Definitions?}

\textit{Ballast} - heavy material, such as gravel, sand, iron, or lead, placed low in a vessel to improve its stability. \\ \\
\textit{Handling Gear} - The set of gear that aids in deploying the submarine. Contains the tether, a winch, battery, communications module, and various storage. See Diagram \\ \\
\textit{Idaho Catfish }  – The submarine nickname. \\ \\
\textit{O-Ring} - a gasket in the form of a ring with a circular cross section, typically made of pliable material, used to seal connections in pipes, tubes, etc.
\textit{Tethered } – The wires that connect the submarine to the surface, allowing for direct control and easier tracking of the submarine. Currently the submarine only runs tethered, it is not fully autonomous. \\ \\
\textit{ V } - Stands for voltage, a way of measuring a charge in batteries. \\ \\

\newpage
 
%----------------------------------------------------------------------------------------
%	BASIC OPS
%----------------------------------------------------------------------------------------

\section{Basic Operations}
\subsection{Components}
\vspace*{15mm}
\begin{figure}[H]
	\centering 
	\hspace*{-2.5cm}
	\includegraphics[width=1.4\linewidth]{Figures/Component_Diagrams/basic_sub.jpg}
	\caption[]{An overview of the submarine} % The text in the square bracket is the caption for the list of figures while the text in the curly brackets is the figure caption 
\end{figure}
\vspace*{15mm}
\begin{figure}[H]
	\centering 
	\hspace*{-2.5cm}
	\includegraphics[width=1.4\columnwidth]{Figures/Component_Diagrams/inside_sub.jpg}
	\caption[]{An inside view of the submarine} % The text in the square bracket is the caption for the list of figures while the text in the curly brackets is the figure caption 
\end{figure}
\vspace*{15mm}
\begin{figure}[H]
	\centering 
	\hspace*{-2.5cm}
	\includegraphics[width=1.4\columnwidth]{Figures/Component_Diagrams/navigation_board.jpg}
	\caption[]{An inside view of the submarines' camera main module} % The text in the square bracket is the caption for the list of figures while the text in the curly brackets is the figure caption 
\end{figure}
\vspace*{15mm}
\begin{figure}[H]
	\centering 
	\hspace*{-2.5cm}
	\includegraphics[width=1.4\columnwidth]{Figures/Component_Diagrams/handling_gear.jpg}
	\caption[]{An overview of the handling gear} % The text in the square bracket is the caption for the list of figures while the text in the curly brackets is the figure caption 
\end{figure}

\clearpage
\newpage

%------------------------------------------------

\subsection{Schematics}

Schematic Pictures when Adrian and I make them go here.
%------------------------------------------------

\subsection{Wiring Pins List}

The following is a list of the pins used per area. All wires are already numbered inside the submarines' main camera module. 

\begin{itemize}[noitemsep] % [noitemsep] removes whitespace between the items for a compact look
	\item Communications Module (12 Pins)
	\begin{itemize}[noitemsep]
		\item \#1 Ethernet Orange/White
		\item \#2 Ethernet Orange
		\item \#3 Ethernet Green/White
		\item \#4 Ethernet Green
		\item \#5 Ground
		\item \#6 Ground
		\item \#7 +12 VDC
		\item \#8-12 Unused
	\end{itemize}
	\item Main Module Tether (12 Pins)
		\begin{itemize}[noitemsep]
		\item \#1 Ethernet Orange/White
		\item \#2 Ethernet Orange
		\item \#3 Ethernet Green/White
		\item \#4 Ethernet Green
		\item \#5 Ground
		\item \#6 Ground
		\item \#7 +12 VDC
		\item \#8-12 Unused
	\end{itemize}
	\item Main Module Auxiliary (16 Pins)
		\begin{itemize}[noitemsep]
		\item \#1 Lights +12 VDC
		\item \#2 Unused +12 VDC
		\item \#3 Lights PWM
		\item \#4-16 Unused
	\end{itemize}
	\item Main Module Thrusters (16 Pins)
		\begin{itemize}[noitemsep]
		\item \#1-3 Left Horizontal Thruster
		\item \#4-6 Left Vertical Thruster
		\item \#7-9 Tail Vertical Thruster
		\item \#10-12 Right Vertical Thruster
		\item \#13-15 Right Horizontal Thruster
		\item \#16 Unused
	\end{itemize}
	\item Main Module Power (8 Pins)
		\begin{itemize}[noitemsep]
		\item \#1-4 Thruster Power
		\item \#5 CPU Power
		\item \#6-8 Thruster Power

	\end{itemize}
	\item Commutator (8 Contacts)
		\begin{itemize}[noitemsep]
		\item \#1-2 +9 VDC
		\item \#3-4 Ground
		\item \#5 Ethernet Green
		\item \#6 Ethernet Green/White
		\item \#7 Ethernet Orange
		\item \#8 Ethernet Orange/White
	\end{itemize}
	\item Onboard Power List
		\begin{itemize}[noitemsep]
		\item (3) 12V Lead Acid Batteries
		\item (2) +12 VDC to Thruster Power Switch
		\item (1) +12 VDC to CPU Power Switch
		\item (2) Ground to Frame
	\end{itemize}
	
\end{itemize}

%------------------------------------------------

\subsection{Power on/off}

Located on the back of the submarine is a power station with plugs. Each plug is labeled: PI, PWR, GRND. These are acronyms. PI stands for Raspberry Pi, it has its' own battery contained in the submarine. PWR runs to two separate batteries that have been linked together. Both batteries power the thrusters of the submarine. This is because the thrusters take so much power, by giving them two batteries, they last longer; also by separating them from the Raspberry Pi, if one dies it doesn't affect the integrity of the other. GRND stands for ground, its sole purpose is merely for charging the batteries.

%------------------------------------------------

\subsection{Charging Battery}

There are two separate chargers for charging the batteries as well as two separate sets of batteries. One set of batteries is inside the submarine, and the other set is on the handling gear.

\paragraph{The Charger}
The charger itself has an indicator on the back. By attaching the required charger to the battery it will tell you how much power is remaining as well as the charging progress. The charger also has a trickle feature, so it can be left plugged in overnight and will not overcharge the battery.\\ \\
There is also a charge indicator provided as a separate device. When measuring the charge, it is in voltage not percent. The nominal charge is 12V, fully charged is 13V, and low voltage is 11V. \\ \\
DO NOT let the batteries get below 11V. It is NOT recommended.

\paragraph{Submarine Battery Charge}
When charging the submarine, you can only charge one of the battery sets inside at a time. This is because of the way the charger was designed. So either the Raspberry Pi or the thrusters can be charged. \\ \\
In order to begin charging, the red attachment will be plugged into the desired battery port and the black attachment will always be plugged into ground. Charging the submarine (both battery sets) will take about 12 hours. It is recommended to charge the submarine after each deployment.

\paragraph{Handling Gear Charge}
When charging the handling gear, it functions in much the same way as the submarine. You will attach the charger to the handling gear battery, red to power and black to ground. Testing the handling gear battery charge is recommended but it lasts a very long period of time so frequent charges are not required.

%------------------------------------------------

\subsection{Deployment}

TO BE FILLED IN WITH ADRIAN'S ASSISTANCE, DUMMY TEXT FOLLOWS


%------------------------------------------------

%------------------------------------------------

\subsection{Checks}

The purpose of these checks is to ensure the functionality of all submarine and handling gear parts both before and after deployment.

\paragraph{Handling Gear - Preoperational Checks} Before operating the handling gear, it is important to go through the following checks:

\begin{itemize}[noitemsep] % [noitemsep] removes whitespace between the items for a compact look
	\item Voltage check
	\item Winch check
	\item Reel check
	
\end{itemize}
Further descriptions of the aforementioned checks are as follows:

\begin{description}
	\item[Voltage Check] In order to check the voltage of the handling gear battery, merely use the provided voltage check device in the same manner as the battery charger. Attach the red wire to power and the black wire to ground. The handling gear battery is very long lasting and therefore this check does not need to be done after every deployment, but also should not be significantly deferred.
	\item[Winch Check] In order to make sure the winch wire itself isn't caught or in any way impeded, merely release the manual winch switch and pull on the wire. Then, in order to rest the integrity of power raising/lowering of the wire, use the control box on the side of the handling gear. Make sure to test both the forward and reverse aspects of the winch. 
	\item[Reel Check] The reel check is merely testing the large tether and making sure it has free movement and connection. The fiber-optic cable should be free to move, both in forward and reverse. There is a switch respective to this on the control box of the handling gear.
\end{description}

\paragraph{Submarine - Preoperational Checks} In order to ensure the integrity of the submarine hull prior to a deployment, the following checks should be conducted:

\begin{itemize}[noitemsep] % [noitemsep] removes whitespace between the items for a compact look
	\item Control module all thread torque checked
	\item Vertical thruster mount bolts checked
	\item Thruster to control module cables and connectors checked
	\item Light to control module cables and connectors checked
	\item Syntactic foam intact
	\item Other cables to control module?
	\item Mast attachment bolt torque checked
\end{itemize}

\paragraph{Software Checks} Prior to deployment of the submarine, the following software checks should be conducted:

\begin{itemize}[noitemsep] % [noitemsep] removes whitespace between the items for a compact look
	\item Ethernet cable connection to communications module box and host PC
	\item Ping from host PC terminal
	\item Open camera servers
	\item SSH into the submarine main Raspberry Pi
	\item Trusters check
\end{itemize}

\begin{description}
	\item[Pinging] 
	This check is to make sure that packets are being passed back and forth and that communication is happening.
	\item[Opening camera servers] 
	The camera servers are as follows:
	 
	\begin{itemize}[noitemsep]
		\item 192.168.2.1:8080/stream
		\item 192.168.2.2:8080/stream
	\end{itemize}

	If pictures or recordings are wanted, a separate program is needed.
	\item[Pi Login]
	The IP address of the Raspberry Pi in the submarine main module is 192.168.2.1. If you desire to access the Communications module Raspberry Pi is 192.168.2.2.
	\item[Trusters Check] When running python 3, file name thrusters\_client.py, output should give "connected to server". If testing thruster function, barely push forward on a controller analog. "Barely" is key because there is much less resistance in air than in water, so burning the thrusters is a risk.
\end{description}

\paragraph{Submarine - Postoperational Checks}

\begin{itemize}[noitemsep] % [noitemsep] removes whitespace between the items for a compact look
	\item Voltage check
	\item Physical check
	\item All shell bolts in-place and torque checked
	\item Vehicle to Communication module cable connected
	\item Final ballast system accessible
\end{itemize}

%------------------------------------------------

\subsection{Getting Inside the Catfish}

The Catfish itself is not watertight. It is divided into two halves, the upper and lower parts. The upper part of the submarine contains all the electronics, thrusters, and wires. The lower part of the submarine has the ballast and buoyancy materials. Water flows freely through all parts except the Main Module. The wires inside the Navigation Cable Box are waterproofed as well. If for any reason the inside of the Catfish needs to be accessed, please refer to the following sections: 

\paragraph{Removing the Hull} This is fairly simple, all that is needed is to remove the screws. First, all the screws and bolts around the outside of the submarine EXCEPT the thruster screws/bolts will be removed. The reason for this is that it is easier to manage the thrusters falling off when they are the last to be removed. Next you remove the mast bolt and the mast itself. Once this is done, the top hull can be removed from the submarine. \\

If you want to access the Main Module, then follow the next directions. First you want to unscrew the 2 6mm bolts under the face of the submarine camera. You also need to remove the bolts and washers from the long metal rods around the Main Module. Then you can slide the assembly off the insides of the module. Refer to diagram above in the Components section for an outline of the module.
\paragraph{Reattaching the Hull} When ready to reattach the Main Module and hull, please follow these directions. \\

First is the reassembly of the Main Module casing. Make sure all the ends are clean, both on the metal rods and the cylinder casing. Also make sure the O-Rings are clean. Grease both ends of the cylindrical casing with silicon grease, a little grease goes a long way. This process is just to make the O-Rings happier when under pressure. Then you will slide this assembly back onto the Main Module insides, tucking in the wires as you go and pushing it taut. While keeping pressure up put the washers and bolts back in place on the long metal rods, these should spin on easily. If they do not, then you are using the bolts for the outside of the hull and not the ones for the Main Module. Lastly, screw in the 2 6mm bolts back under the face of the submarine camera. This can be done by hand. In order to test the tightness of the Main Module, you can use sound. Merely pull the rods like a guitar string and make sure they all sound the same. The face of the camera should be flush with the submarine.\\

To reattach the hull itself, just place the hull in place and screw in all the bolts except the thrusters and lights. After all the screws/bolts are in place, reattach the thrusters and then the lights which go under the thrusters. The lights can be pointed in different directions using the screw on the mount. After everything is tight, the mast can be reattached. The submarine is now reassembled.
%------------------------------------------------

%----------------------------------------------------------------------------------------
%	USING SOFTWARE
%----------------------------------------------------------------------------------------

\section{Using Software}
 connect ethernet cord and connect the tether.
turn everything on
OS SPECIFIC - change your ethernet specification range to 192.168.2.1 - 192.168.2.254
the reason you change the range is so that you can access the pis, otherwise you cant connect. Make SURE the network range doesn't interfere with any nearby routers.

After the initial setup, you can either VNC or SSH in.

download the VNC viewer application if wanting to use it. Then you must open application and put in IP address; here you will enter the actual ip followed by a ":1". After that, it will ask you for the required login and password.

Username: pi
Pass: makerspace

if you have a wireless network set up, you can set up a static ip. 192.168.0.207 for tp-link internet

%------------------------------------------------

\subsection{Connecting to the Submarine}

\paragraph{Ethernet Connection}
\paragraph{Wireless Connection}



%------------------------------------------------
%------------------------------------------------

\subsection{Moving the Submarine}



%------------------------------------------------

%------------------------------------------------

\subsection{Taking Pics/Video}



\paragraph{Where to Save} 

\paragraph{Streaming} 

%------------------------------------------------

%----------------------------------------------------------------------------------------
%	SYSTEM CONFIG
%----------------------------------------------------------------------------------------

\section{System Configuration}



%------------------------------------------------

\subsection{Configuring 3D map?}


\subsubsection{Testing with the Turtle}


\subsubsection{Mapping Underwater}


%------------------------------------------------

\subsection{Changing the Raspberry Pi IP's}

--------------------------------
%	CONSUMER INFO
%----------------------------------------------------------------------------------------

\section{Consumer Info}

\subsection{Troubleshooting}


\end{document}